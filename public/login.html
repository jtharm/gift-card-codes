<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: #f5f5f5;
    }

    .login-container {
      background: #fff;
      padding: 20px 30px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      width: 100%;
      max-width: 400px;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
    }

    input[type="email"] {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      box-sizing: border-box;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    button {
      width: 100%;
      padding: 10px;
      font-size: 1rem;
      border: none;
      border-radius: 5px;
      background-color: #007BFF;
      color: white;
      cursor: pointer;
    }

    button:hover {
      background-color: #0056b3;
    }

    .error-message {
      color: red;
      margin-top: 10px;
      text-align: center;
      font-size: 0.9rem;
    }

    .feedback-footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: white;   /* or whatever */
      padding: 10px 0;
      text-align: center;
      z-index: 999;        /* make sure it stays on top */
      border-top: 1px solid #ccc;
    }
    
    /* Desktop enhancements */
    @media (min-width: 768px) {
      .feedback-footer {
        font-size: 0.85rem;
        background: rgba(0,255,0,0.3);
        padding: 6px 0;
        border-top: 1px solid rgba(0,0,0,0.1);
        color: #555;
      }
    
      .feedback-footer a {
        color: #555;
      }
    
      .feedback-footer a:hover {
        color: #222;
        text-decoration: underline;
      }
    }

  </style>
</head>
<body>

  <div class="login-container">
    <h1>Login</h1>

    <form action="/login" method="POST" autocomplete="on">
      <!-- Hidden password field: makes iOS reliably show email Autofill -->
      <input type="password" autocomplete="current-password" style="display:none">
      
      <input
        id="email"
        type="email"
        name="email"
        placeholder="Enter your email"
        autocomplete="email username"
        inputmode="email"
        required
      />

      <button type="submit">Login</button>
    </form>

    <div class="error-message" id="error-message"></div>
  </div>

  <script>
    // Show error message if provided via URL
    const urlParams = new URLSearchParams(window.location.search);
    const error = urlParams.get('error');
    const email = urlParams.get('email');
    const errorDiv = document.getElementById('error-message');
    const emailInput = document.getElementById('email');

    if (error) errorDiv.textContent = error;
    if (email) emailInput.value = email;

    if (location.hostname === "gift-card-codes-develop.onrender.com" || location.hostname === "gift-card-codes-develop.vercel.app") { 
      const banner = document.createElement("div");
      banner.textContent = "‚ö†Ô∏è DEVELOPMENT VERSION ‚Äî For testing only";

      Object.assign(banner.style, {
        position: "fixed",
        top: "0",
        left: "0",
        width: "100%",
        background: "#ff0000",
        color: "#000",
        padding: "10px",
        fontSize: "15px",
        fontWeight: "bold",
        textAlign: "center",
        zIndex: "99999",
        borderBottom: "1px solid #000"
      });

      // Insert BEFORE your topbar
      const topbar = document.querySelector(".topbar");
      document.body.insertBefore(banner, topbar);

      // Move the topbar down (not entire body)
      topbar.style.marginTop = "45px";  // adjust if needed
    }
  </script>
  
  <div class="feedback-footer">
    üí¨ Feedback or issues?  
    <a href="https://github.com/jtharm/gift-card-codes/issues" target="_blank">Submit on GitHub</a>
  </div>
</body>
</html>
